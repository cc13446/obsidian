## 字符串
字符串只是一个可读的字节数组，会分配到只读的内存空间，但是Go只是不支持直接修改`string`类型的内存空间，我们仍然可以通过将其转换成`[]byte`类型来实现修改这一目的。

![](字符串/Pasted%20image%2020220828093016.png)

### 数据结构
每一个字符串在运行时都会使用`reflect.StringHeader`表示，与切片相比只少了一个表示容量的`cap`字段，所以说字符串是一个只读的切片类型。因此，所有在字符串上的写入操作都是通过拷贝实现的。

```go
type StringHeader struct {
	Data uintptr // 指向字节数组的指针
	Len  int     // 数组大小
}
```

### 拼接
Go语言拼接字符串使用`+`号，会先遍历传入的切片参数，然后再过滤空字符串并计算拼接后字符串的长度。如果非空字符串的数量为 1 并且当前的字符串不在栈上，就可以直接返回该字符串，不需要做出额外操作。正常情况下会调用`copy`将输入的多个字符串拷贝到目标字符串所在的内存空间，新的字符串与原来的没有任何关系。一旦需要拼接的字符串非常大，拷贝带来的性能损失也是无法忽略的。

![](字符串/Pasted%20image%2020220828212813.png)

### 类型转换
当字符串和字节数组相互转换的时候，也会讲数据拷贝一次。

![](字符串/Pasted%20image%2020220828212948.png)



